{% extends "layout.html" %}


{% block title %}
Index
{% endblock %}


{% block headline %}
{{ title }}
{% endblock %}



{% block content %}
<img src="/static/123.jpg?202107291601" class="img-fluid" alt="Responsive image"/>
<h4 class="mb-1 " id="msg">{{message}}</h4>

<!-- Vue.js container -->
<div id="app" class="m-3">
    <mycomp/>
</div>


<!-- mycomp's template -->
{% raw %}

<script type="text/x-template" id="mycomp-template">
<!-- â†“ä»¥ä¸‹ã¯â‡’ã‚’å‚ç…§ã€€https://blog1.mammb.com/entry/2019/12/11/090000 -->   
<!-- ä½†ã—ã€â†‘å‚ç…§HPã§ã¯<form>~</form>ã§æ‹¬ã£ã¦ã„ã‚‹ãŒã€1è¡Œç›®ã‚’<div class="form-group"> -->
  <!-- æœ€çµ‚è¡Œã‚’</div>  ã§æ‹¬ã‚‰ãªã„ã¨ã€SPAã¨ã—ã¦å‹•ä½œã—ãªã„ï¼ˆindex/?file=ï¼‰ã¨ãªã£ã¦ã—ã¾ã†ã€‚ -->
<div><!-- â†ã€€ã“ã®æœ€åˆã®divã¯ã€å¿…è¦ï¼ï¼ãƒ»ãƒ»ã§ãªã„ã¨ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°year_month DialogãŒå‡ºã¦ã“ãªã„ -->
 
  <div class="form-group">
    <label >{{title_msg}}</label>
    <button type="submit"  class="btn btn-primary" v-on:click="preDl_file">ãƒ•ã‚¡ã‚¤ãƒ«å—ä¿¡</button>
            </div>
<!-- Error message  -->
<!-- <div class="card" >
  <div class="card-body">
  <img class="card-img"  src="/static/1.png">
  </div>
</div> -->
    <label>ğŸ‘‡ä»¥ä¸‹ã€Œã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã§ã™</label>
      ã€€<label>(â€»ç·æ‹¬è¡¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ã€Œèª­ã¿è¾¼ã¿ä¸å¯ã€€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚·ãƒ¼ãƒˆã«ã‚‚æ›¸ãè¾¼ã¾ã‚Œã¦ã„ã¾ã™)</label>
    <ul class="list-group border-left border-right border-bottom list-unstyled">
      <template v-for="items in errData">
        <li class="border-top" >
          {{items[0]}}<!-- {{url_for('static', filename='123.jpg')}} -->
        </li>
        <template v-for="item in items.slice(1)"><!--https://maku77.github.io/js/array/slice.html  -->
            <ul>
              <!-- {% set jpg_url={{url_for('static', filename='123.jpg')}} %} -->
              
              <!--â†“bootstrapã®ã€Œtooltipã€ã‚’ãƒªã‚¹ãƒˆã«ä½¿ã†æ™‚ã€€å‚ç…§â‡’https://blog.capilano-fw.com/?p=4773   -->
              <!-- â†“ã€€ä½†ã—ã€ã€Œtooltipã€ã®ã€Œtitle=ã€å±æ€§ã‚’ä¸Šè¨˜HPã®ã‚ˆã†ã«ã€Œdata-original-titleã€ã¨ã—ãªãã¦ã‚‚ã†ã”ã„ã¦ãã‚ŒãŸ -->
              <!-- <li class="list-group-item-sm list-unstyled ml-4 small border-top-0 border-left-0 border-right-0" 
                data-toggle="tooltip" data-html="true" 
                v-bind:data-original-title="'ã€'+item[0]+'ã€‘'+item[1]+'<br><img src=&quot;&#39;{{url_for('static', filename='123.jpg')}}&#39;&quot; class=&quot;img-fluid&quot; alt=&quot;Responsive image&quot;>'"> -->
                <!-- <li class="list-group-item-sm list-unstyled ml-4 small border-top-0 border-left-0 border-right-0" 
                data-toggle="tooltip" data-html="true" 
                v-bind:data-original-title="'ã€'+item[0]+'ã€‘'+item[1]+'<br><img src=&quot;/static/123.jpg&quot;>'">  --> 
                <!-- <li class="list-group-item-sm list-unstyled ml-4 small border-top-0 border-left-0 border-right-0" 
                data-toggle="tooltip" data-html="true" 
                v-bind:data-original-title="'ã€'+item[0]+'ã€‘'+item[1]+'<br><img src=&quot;'/static/'+item[0]+'.jpg?202107291602'&quot; &#47;>'"> -->  
                <li class="list-group-item-sm list-unstyled ml-4 small border-top-0 border-left-0 border-right-0" 
                data-toggle="tooltip" data-html="true" 
                v-bind:title="'ã€'+item[0]+'ã€‘'+item[1]+'<br><img src=&quot;/static/'+item[0]+'.jpg?202107291603&quot; />'"> 
                <!--â†‘ã€Œv-bind:title=ã€ãƒ»ãƒ»ãƒ»vueãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–å†…ã®å±æ€§ã«ã€å¤‰æ•°ã‚’ä½¿ã†æ™‚ã«ã€Œv-bind:ã€ã¯å¿…è¦ã€€å‚ç…§â‡’ ã€Python ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯Flaskã§å­¦ã¶ Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã—ãã¿ã¨ã¤ãã‚Šæ–¹ [æŒç”°æ´¥è€¶ä¹ƒ]ã€P204  -->
                <template v-if="item[0]==''">
                  {{''}}
                  
                </template>  
                <template v-else>
                  
                  {{'ã€'+item[0]+'ã€‘'+item[1]}}
                </template> 
              </li>
            <ul>  
        </template>
      </template>
    </ul> 



</div><!-- â†ã€€ã“ã®æœ€å¾Œã®divã¯ã€å¿…è¦ï¼ï¼ãƒ»ãƒ»ã§ãªã„ã¨ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°year_month DialogãŒå‡ºã¦ã“ãªã„ -->
<!-- â†‘ä»¥ä¸Šã¯â‡’ã‚’å‚ç…§ã€€https://blog1.mammb.com/entry/2019/12/11/090000 -->    
</script>
{% endraw %}

<!-- ******************** -->
<!-- * Vue.js Component Script * -->
<!-- ******************** -->
<script>

  
//database view

Vue.component('mycomp', {
    template: '#mycomp-template',
    data:function(){

        return{  
                title_msg:'download è©¦è¡Œé–‹å§‹',
                downloadFileName: '',  //â†ã“ã®ä¸€è¡Œã®downloadFileã¨ã„ã†å¤‰æ•°ã¯
                errData:null,
                //ajaxé€šä¿¡ã™ã‚‹ã¨ãã«ç”¨æ„ã—ã¦ãŠã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„â‡’ã‚’å‚ç…§ã€€http://tech.aainc.co.jp/archives/10714
                jpg_url:null,
                
              }
    },
    methods:{
      preDl_file:function(e){
        /* e.preventDefault(); */
        /* let formData= new FormData(); */
        /* let data={downloadFile:self.downloadFile} */
        /* let blobData= new Blob(); */
        let self=this;
        $.ajax({//â†ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®pythonå´ã‹ã‚‰æˆ»ã‚Šå€¤ã¨ã—ã¦
          //é€ã£ã¦ã‚‚ã‚‰ã†æ™‚ã¯ã€axiosã‚ˆã‚Šã‚‚ã€ãªãœã‹$.ajaxã®ã»ã†ãŒæˆåŠŸã™ã‚‹
        method: "GET",
        url: "/preget",

        success:function(data1) {
          self.errData=data1;
          Vue.nextTick(() => {

            $('[data-toggle="tooltip').tooltip();
            /* title() {
            return $(this).attr('title');
            } */
            })
        },
        error:function () {
          self.title_msg='é€ä¿¡é€”ä¸­ã§å¤±æ•—';
        }
      });
      },
    },
    /* â†“ã€€å‹•çš„ã«ã€Œtooltipã€ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€Œwatchã€ã¯å¿…è¦
    å‚ç…§â‡’https://blog.capilano-fw.com/?p=4773
    ä½†ã—ã€ä¸Šè¨˜HPã®ã‚µãƒ³ãƒ—ãƒ«ã«ã‚ã£ãŸã€Œmountedã€ã€Œtitle()ã€ã¯ã€çœç•¥ã—ã¦ã‚‚å‹•ã„ã¦ãã‚ŒãŸ */
           /*  watch: {
              item:function() {
              

                }
            }, */
            /* mounted() {
                this.errData = data1;
            } */

});
//start Vue.
new Vue({
    el:'#app',
});
</script>

{% endblock %}




{% block footer %}
copyright 2020 shim tko.
{% endblock %}
